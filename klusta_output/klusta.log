17:28:25 [I] creator:446          Using kwik file `/home/alex/Desktop/Fall_2020/Spike_Sorting/Spike_Sorting_GUI/klusta_output/recording.kwik`.
17:28:25 [I] launch:206           Starting spike detection.
17:28:25 [I] launch:53            SpikeDetekt parameters:
17:28:25 [I] launch:55            chunk_overlap_seconds = 0.015
17:28:25 [I] launch:55            chunk_size_seconds = 3
17:28:25 [I] launch:55            connected_component_join_size = 1
17:28:25 [I] launch:55            detect_spikes = negative
17:28:25 [I] launch:55            dtype = int16
17:28:25 [I] launch:55            excerpt_size_seconds = 1
17:28:25 [I] launch:55            experiment_name = recording.kwik
17:28:25 [I] launch:55            extract_s_after = 32
17:28:25 [I] launch:55            extract_s_before = 16
17:28:25 [I] launch:55            filter_butter_order = 3
17:28:25 [I] launch:55            filter_high_factor = 0.475
17:28:25 [I] launch:55            filter_low = 500.0
17:28:25 [I] launch:55            n_channels = 4
17:28:25 [I] launch:55            n_excerpts = 50
17:28:25 [I] launch:55            n_features_per_channel = 3
17:28:25 [I] launch:55            pca_n_waveforms_max = 10000
17:28:25 [I] launch:55            prb_file = /home/alex/Desktop/Fall_2020/Spike_Sorting/Spike_Sorting_GUI/klusta_output/probe.prb
17:28:25 [I] launch:55            raw_data_files = /home/alex/Desktop/Fall_2020/Spike_Sorting/Spike_Sorting_GUI/klusta_output/recording.dat
17:28:25 [I] launch:55            sample_rate = 32000.0
17:28:25 [I] launch:55            threshold_strong_std_factor = 5
17:28:25 [I] launch:55            threshold_weak_std_factor = 2
17:28:25 [I] launch:55            use_single_threshold = 1
17:28:25 [I] launch:55            voltage_gain = 1.0
17:28:25 [I] launch:55            weight_power = 2
17:28:25 [I] spikedetekt:212      Found 4 live channels in group 0.
17:28:25 [I] spikedetekt:285      Finding the thresholds...

Detecting spikes        :   0%|          | 0/4 [00:00<?, ?it/s]
Detecting spikes        :  25%|██▌       | 1/4 [00:00<00:01,  2.99it/s]
Detecting spikes        :  50%|█████     | 2/4 [00:00<00:00,  3.03it/s]
Detecting spikes        :  75%|███████▌  | 3/4 [00:01<00:00,  2.98it/s]
Detecting spikes        : 100%|██████████| 4/4 [00:01<00:00,  3.67it/s]

Extracting waveforms    :   0%|          | 0/4 [00:00<?, ?it/s]
Extracting waveforms    :  50%|█████     | 2/4 [00:00<00:00, 13.17it/s]
Extracting waveforms    : 100%|██████████| 4/4 [00:00<00:00, 14.62it/s]
Extracting waveforms    : 100%|██████████| 4/4 [00:00<00:00, 15.76it/s]

Performing PCA          :   0%|          | 0/1 [00:00<?, ?it/s]
Performing PCA          : 100%|██████████| 1/1 [00:00<00:00, 178.00it/s]

Computing features      :   0%|          | 0/4 [00:00<?, ?it/s]
Computing features      :  50%|█████     | 2/4 [00:00<00:00, 12.91it/s]
Computing features      : 100%|██████████| 4/4 [00:00<00:00, 14.32it/s]
Computing features      : 100%|██████████| 4/4 [00:00<00:00, 15.44it/s]
17:28:26 [I] launch:218           Spike detection done! 822 spikes found in shank 0
/home/alex/anaconda3/lib/python3.7/site-packages/klusta/kwik/h5.py:55: H5pyDeprecationWarning: The default file mode will change to 'r' (read-only) in h5py 3.0. To suppress this warning, pass the mode you need to h5py.File(), or set the global default h5.get_config().default_file_mode, or set the environment variable H5PY_DEFAULT_READONLY=1. Available modes are: 'r', 'r+', 'w', 'w-'/'x', 'a'. See the docs for details.
  with h5py.File(path, driver='sec2') as f:
17:28:26 [I] launch:249           Starting clustering on shank 0/1.
17:28:26 [I] launch:252           Clustering group 0 (822 spikes).
17:28:26 [I] launch:123           Starting KK...
17:28:26 [I] klustakwik.initial_parameters prior_point = 1
17:28:26 [I] klustakwik.initial_parameters mua_point = 2
17:28:26 [I] klustakwik.initial_parameters noise_point = 1
17:28:26 [I] klustakwik.initial_parameters points_for_cluster_mask = 100
17:28:26 [I] klustakwik.initial_parameters penalty_k = 0.0
17:28:26 [I] klustakwik.initial_parameters penalty_k_log_n = 1.0
17:28:26 [I] klustakwik.initial_parameters max_iterations = 1000
17:28:26 [I] klustakwik.initial_parameters num_starting_clusters = 50
17:28:26 [I] klustakwik.initial_parameters use_noise_cluster = True
17:28:26 [I] klustakwik.initial_parameters use_mua_cluster = True
17:28:26 [I] klustakwik.initial_parameters num_changed_threshold = 0.05
17:28:26 [I] klustakwik.initial_parameters full_step_every = 1
17:28:26 [I] klustakwik.initial_parameters split_first = 20
17:28:26 [I] klustakwik.initial_parameters split_every = 40
17:28:26 [I] klustakwik.initial_parameters max_possible_clusters = 1000
17:28:26 [I] klustakwik.initial_parameters dist_thresh = 9.210340371976184
17:28:26 [I] klustakwik.initial_parameters max_quick_step_candidates = 100000000
17:28:26 [I] klustakwik.initial_parameters max_quick_step_candidates_fraction = 0.4
17:28:26 [I] klustakwik.initial_parameters always_split_bimodal = False
17:28:26 [I] klustakwik.initial_parameters subset_break_fraction = 0.01
17:28:26 [I] klustakwik.initial_parameters break_fraction = 0.0
17:28:26 [I] klustakwik.initial_parameters fast_split = False
17:28:26 [I] klustakwik.initial_parameters max_split_iterations = None
17:28:26 [I] klustakwik.initial_parameters consider_cluster_deletion = True
17:28:26 [I] klustakwik.initial_parameters num_cpus = None
17:28:26 [I] klustakwik Using mask starts with 50 clusters, data has 5 unique masks
17:28:26 [W] klustakwik Not enough masks (5) for specified number of starting clusters (50)
17:28:26 [I] klustakwik Clustering data set of 822 points, 12 features
17:28:26 [I] klustakwik Starting iteration 0 with 7 clusters
17:28:26 [W] klustakwik Linear algebra error on cluster 3
17:28:26 [W] klustakwik Linear algebra error on cluster 4
17:28:26 [W] klustakwik Linear algebra error on cluster 5
17:28:26 [W] klustakwik Linear algebra error on cluster 6
17:28:26 [I] klustakwik Iteration 1F: 3 clusters, 35 changed, score=-8874.836769
17:28:26 [I] klustakwik Iteration 2F: 3 clusters, 16 changed, score=-9470.677300 (decreased by 595.840531)
17:28:26 [I] klustakwik Iteration 3F: 3 clusters, 11 changed, score=-9589.551619 (decreased by 118.874318)
17:28:26 [I] klustakwik Iteration 4F: 3 clusters, 5 changed, score=-9641.744722 (decreased by 52.193103)
17:28:26 [I] klustakwik Iteration 5F: 3 clusters, 2 changed, score=-9658.646397 (decreased by 16.901675)
17:28:26 [I] klustakwik Iteration 6F: 3 clusters, 2 changed, score=-9660.965027 (decreased by 2.318629)
17:28:26 [I] klustakwik Iteration 7F: 3 clusters, 1 changed, score=-9661.939599 (decreased by 0.974573)
17:28:26 [I] klustakwik Iteration 8F: 3 clusters, 1 changed, score=-9663.332071 (decreased by 1.392471)
17:28:26 [I] klustakwik Iteration 9F: 3 clusters, 0 changed, score=-9663.865087 (decreased by 0.533016)
17:28:26 [I] klustakwik No points changed and last step was full, so trying to split.
17:28:26 [I] klustakwik Trying to split clusters
17:28:27 [I] klustakwik Split into 4 clusters
17:28:27 [I] klustakwik Iteration 10F: 4 clusters, 9 changed, score=-12438.064157 (decreased by 2774.199070)
17:28:27 [I] klustakwik Iteration 11F: 4 clusters, 0 changed, score=-12474.371597 (decreased by 36.307440)
17:28:27 [I] klustakwik No points changed and last step was full, so trying to split.
17:28:27 [I] klustakwik Trying to split clusters
17:28:27 [I] klustakwik Split into 5 clusters
17:28:27 [I] klustakwik Iteration 12F: 5 clusters, 1 changed, score=-13379.142955 (decreased by 904.771357)
17:28:27 [I] klustakwik Iteration 13F: 5 clusters, 1 changed, score=-13389.995508 (decreased by 10.852553)
17:28:27 [I] klustakwik Iteration 14F: 5 clusters, 0 changed, score=-13400.130410 (decreased by 10.134903)
17:28:27 [I] klustakwik No points changed and last step was full, so trying to split.
17:28:27 [I] klustakwik Trying to split clusters
17:28:27 [I] klustakwik No points changed, previous step was full and did not split, so finishing.
17:28:27 [I] launch:131           The automatic clustering process has finished.
17:28:27 [I] launch:268           Save the clustering to `/home/alex/Desktop/Fall_2020/Spike_Sorting/Spike_Sorting_GUI/klusta_output/recording.kwik`.
/home/alex/anaconda3/lib/python3.7/site-packages/klusta/kwik/h5.py:55: H5pyDeprecationWarning: The default file mode will change to 'r' (read-only) in h5py 3.0. To suppress this warning, pass the mode you need to h5py.File(), or set the global default h5.get_config().default_file_mode, or set the environment variable H5PY_DEFAULT_READONLY=1. Available modes are: 'r', 'r+', 'w', 'w-'/'x', 'a'. See the docs for details.
  with h5py.File(path, driver='sec2') as f:
17:28:27 [I] model:1085           Save the Kwik file at `/home/alex/Desktop/Fall_2020/Spike_Sorting/Spike_Sorting_GUI/klusta_output/recording.kwik`.
17:28:27 [I] launch:290           Clustering done!
