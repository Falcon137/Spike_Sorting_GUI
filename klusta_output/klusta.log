15:59:12 [I] creator:446          Using kwik file `/home/alex/Desktop/Fall_2020/Spike_Sorting/presentation/klusta_output/recording.kwik`.
15:59:12 [I] launch:206           Starting spike detection.
15:59:12 [I] launch:53            SpikeDetekt parameters:
15:59:12 [I] launch:55            chunk_overlap_seconds = 0.015
15:59:12 [I] launch:55            chunk_size_seconds = 3
15:59:12 [I] launch:55            connected_component_join_size = 1
15:59:12 [I] launch:55            detect_spikes = negative
15:59:12 [I] launch:55            dtype = int16
15:59:12 [I] launch:55            excerpt_size_seconds = 1
15:59:12 [I] launch:55            experiment_name = recording.kwik
15:59:12 [I] launch:55            extract_s_after = 32
15:59:12 [I] launch:55            extract_s_before = 16
15:59:12 [I] launch:55            filter_butter_order = 3
15:59:12 [I] launch:55            filter_high_factor = 0.475
15:59:12 [I] launch:55            filter_low = 500.0
15:59:12 [I] launch:55            n_channels = 4
15:59:12 [I] launch:55            n_excerpts = 50
15:59:12 [I] launch:55            n_features_per_channel = 3
15:59:12 [I] launch:55            pca_n_waveforms_max = 10000
15:59:12 [I] launch:55            prb_file = /home/alex/Desktop/Fall_2020/Spike_Sorting/presentation/klusta_output/probe.prb
15:59:12 [I] launch:55            raw_data_files = /home/alex/Desktop/Fall_2020/Spike_Sorting/presentation/klusta_output/recording.dat
15:59:12 [I] launch:55            sample_rate = 32000.0
15:59:12 [I] launch:55            threshold_strong_std_factor = 5
15:59:12 [I] launch:55            threshold_weak_std_factor = 2
15:59:12 [I] launch:55            use_single_threshold = 1
15:59:12 [I] launch:55            voltage_gain = 1.0
15:59:12 [I] launch:55            weight_power = 2
15:59:12 [I] spikedetekt:212      Found 4 live channels in group 0.
15:59:12 [I] spikedetekt:285      Finding the thresholds...

Detecting spikes        :   0%|          | 0/4 [00:00<?, ?it/s]
Detecting spikes        :  25%|██▌       | 1/4 [00:00<00:00,  3.15it/s]
Detecting spikes        :  50%|█████     | 2/4 [00:00<00:00,  3.08it/s]
Detecting spikes        :  75%|███████▌  | 3/4 [00:00<00:00,  3.14it/s]
Detecting spikes        : 100%|██████████| 4/4 [00:01<00:00,  3.95it/s]
Detecting spikes        : 100%|██████████| 4/4 [00:01<00:00,  3.76it/s]

Extracting waveforms    :   0%|          | 0/4 [00:00<?, ?it/s]
Extracting waveforms    :  50%|█████     | 2/4 [00:00<00:00, 11.20it/s]
Extracting waveforms    : 100%|██████████| 4/4 [00:00<00:00, 12.88it/s]
Extracting waveforms    : 100%|██████████| 4/4 [00:00<00:00, 14.28it/s]

Performing PCA          :   0%|          | 0/1 [00:00<?, ?it/s]
Performing PCA          : 100%|██████████| 1/1 [00:00<00:00, 182.74it/s]

Computing features      :   0%|          | 0/4 [00:00<?, ?it/s]
Computing features      :  50%|█████     | 2/4 [00:00<00:00, 11.00it/s]
Computing features      : 100%|██████████| 4/4 [00:00<00:00, 12.63it/s]
Computing features      : 100%|██████████| 4/4 [00:00<00:00, 14.01it/s]
15:59:13 [I] launch:218           Spike detection done! 883 spikes found in shank 0
/home/alex/anaconda3/lib/python3.7/site-packages/klusta/kwik/h5.py:55: H5pyDeprecationWarning: The default file mode will change to 'r' (read-only) in h5py 3.0. To suppress this warning, pass the mode you need to h5py.File(), or set the global default h5.get_config().default_file_mode, or set the environment variable H5PY_DEFAULT_READONLY=1. Available modes are: 'r', 'r+', 'w', 'w-'/'x', 'a'. See the docs for details.
  with h5py.File(path, driver='sec2') as f:
15:59:13 [I] launch:249           Starting clustering on shank 0/1.
15:59:13 [I] launch:252           Clustering group 0 (883 spikes).
15:59:13 [I] launch:123           Starting KK...
15:59:13 [I] klustakwik.initial_parameters prior_point = 1
15:59:13 [I] klustakwik.initial_parameters mua_point = 2
15:59:13 [I] klustakwik.initial_parameters noise_point = 1
15:59:13 [I] klustakwik.initial_parameters points_for_cluster_mask = 100
15:59:13 [I] klustakwik.initial_parameters penalty_k = 0.0
15:59:13 [I] klustakwik.initial_parameters penalty_k_log_n = 1.0
15:59:13 [I] klustakwik.initial_parameters max_iterations = 1000
15:59:13 [I] klustakwik.initial_parameters num_starting_clusters = 50
15:59:13 [I] klustakwik.initial_parameters use_noise_cluster = True
15:59:13 [I] klustakwik.initial_parameters use_mua_cluster = True
15:59:13 [I] klustakwik.initial_parameters num_changed_threshold = 0.05
15:59:13 [I] klustakwik.initial_parameters full_step_every = 1
15:59:13 [I] klustakwik.initial_parameters split_first = 20
15:59:13 [I] klustakwik.initial_parameters split_every = 40
15:59:13 [I] klustakwik.initial_parameters max_possible_clusters = 1000
15:59:13 [I] klustakwik.initial_parameters dist_thresh = 9.210340371976184
15:59:13 [I] klustakwik.initial_parameters max_quick_step_candidates = 100000000
15:59:13 [I] klustakwik.initial_parameters max_quick_step_candidates_fraction = 0.4
15:59:13 [I] klustakwik.initial_parameters always_split_bimodal = False
15:59:13 [I] klustakwik.initial_parameters subset_break_fraction = 0.01
15:59:13 [I] klustakwik.initial_parameters break_fraction = 0.0
15:59:13 [I] klustakwik.initial_parameters fast_split = False
15:59:13 [I] klustakwik.initial_parameters max_split_iterations = None
15:59:13 [I] klustakwik.initial_parameters consider_cluster_deletion = True
15:59:13 [I] klustakwik.initial_parameters num_cpus = None
15:59:13 [I] klustakwik Using mask starts with 50 clusters, data has 3 unique masks
15:59:13 [W] klustakwik Not enough masks (3) for specified number of starting clusters (50)
15:59:13 [I] klustakwik Clustering data set of 883 points, 12 features
15:59:13 [I] klustakwik Starting iteration 0 with 5 clusters
15:59:13 [W] klustakwik Linear algebra error on cluster 3
15:59:13 [W] klustakwik Linear algebra error on cluster 4
15:59:13 [I] klustakwik Iteration 1F: 3 clusters, 40 changed, score=-8360.451926
15:59:13 [I] klustakwik Iteration 2F: 3 clusters, 33 changed, score=-9043.986000 (decreased by 683.534074)
15:59:13 [I] klustakwik Iteration 3F: 3 clusters, 16 changed, score=-9334.740089 (decreased by 290.754089)
15:59:13 [I] klustakwik Iteration 4F: 3 clusters, 8 changed, score=-9371.349439 (decreased by 36.609351)
15:59:13 [I] klustakwik Iteration 5F: 3 clusters, 5 changed, score=-9381.848160 (decreased by 10.498720)
15:59:13 [I] klustakwik Iteration 6F: 3 clusters, 5 changed, score=-9387.640024 (decreased by 5.791864)
15:59:13 [I] klustakwik Iteration 7F: 3 clusters, 2 changed, score=-9393.913024 (decreased by 6.273000)
15:59:13 [I] klustakwik Iteration 8F: 3 clusters, 2 changed, score=-9394.506231 (decreased by 0.593207)
15:59:13 [I] klustakwik Iteration 9F: 3 clusters, 3 changed, score=-9394.857291 (decreased by 0.351060)
15:59:13 [I] klustakwik Iteration 10F: 3 clusters, 3 changed, score=-9395.650945 (decreased by 0.793654)
15:59:13 [I] klustakwik Iteration 11F: 3 clusters, 7 changed, score=-9398.635510 (decreased by 2.984566)
15:59:13 [I] klustakwik Iteration 12F: 3 clusters, 2 changed, score=-9407.435717 (decreased by 8.800207)
15:59:13 [I] klustakwik Iteration 13F: 3 clusters, 2 changed, score=-9408.795254 (decreased by 1.359537)
15:59:13 [I] klustakwik Iteration 14F: 3 clusters, 0 changed, score=-9409.588321 (decreased by 0.793067)
15:59:13 [I] klustakwik No points changed and last step was full, so trying to split.
15:59:13 [I] klustakwik Trying to split clusters
15:59:13 [I] klustakwik Split into 4 clusters
15:59:13 [I] klustakwik Iteration 15F: 4 clusters, 3 changed, score=-9792.184520 (decreased by 382.596199)
15:59:14 [I] klustakwik Iteration 16F: 4 clusters, 1 changed, score=-9797.011563 (decreased by 4.827043)
15:59:14 [I] klustakwik Iteration 17F: 4 clusters, 0 changed, score=-9797.336695 (decreased by 0.325132)
15:59:14 [I] klustakwik No points changed and last step was full, so trying to split.
15:59:14 [I] klustakwik Trying to split clusters
15:59:14 [I] klustakwik Split into 5 clusters
15:59:14 [I] klustakwik Iteration 18F: 5 clusters, 4 changed, score=-10034.390180 (decreased by 237.053485)
15:59:14 [I] klustakwik Iteration 19F: 5 clusters, 4 changed, score=-10113.945688 (decreased by 79.555508)
15:59:14 [I] klustakwik Iteration 20F: 5 clusters, 0 changed, score=-10126.984136 (decreased by 13.038448)
15:59:14 [I] klustakwik No points changed and last step was full, so trying to split.
15:59:14 [I] klustakwik Trying to split clusters
15:59:14 [I] klustakwik No points changed, previous step was full and did not split, so finishing.
15:59:14 [I] launch:131           The automatic clustering process has finished.
15:59:14 [I] launch:268           Save the clustering to `/home/alex/Desktop/Fall_2020/Spike_Sorting/presentation/klusta_output/recording.kwik`.
/home/alex/anaconda3/lib/python3.7/site-packages/klusta/kwik/h5.py:55: H5pyDeprecationWarning: The default file mode will change to 'r' (read-only) in h5py 3.0. To suppress this warning, pass the mode you need to h5py.File(), or set the global default h5.get_config().default_file_mode, or set the environment variable H5PY_DEFAULT_READONLY=1. Available modes are: 'r', 'r+', 'w', 'w-'/'x', 'a'. See the docs for details.
  with h5py.File(path, driver='sec2') as f:
15:59:14 [I] model:1085           Save the Kwik file at `/home/alex/Desktop/Fall_2020/Spike_Sorting/presentation/klusta_output/recording.kwik`.
15:59:14 [I] launch:290           Clustering done!
